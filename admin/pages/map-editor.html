<div class="map-editor-page">
    <div class="editor-header">
        <h2>地图标记编辑器</h2>
        <div class="editor-actions">
            <button class="btn btn-secondary" id="refreshMapBtn">
                <svg viewBox="0 0 24 24" width="16" height="16">
                    <path fill="currentColor" d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
                </svg>
                刷新
            </button>
            <button class="btn btn-primary" id="saveMapBtn">
                <svg viewBox="0 0 24 24" width="16" height="16">
                    <path fill="currentColor" d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"/>
                </svg>
                保存更改
            </button>
            <button class="btn btn-success" id="previewMapBtn">
                <svg viewBox="0 0 24 24" width="16" height="16">
                    <path fill="currentColor" d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
                </svg>
                预览H5
            </button>
        </div>
    </div>

    <div class="editor-container">
        <!-- 左侧景点列表 -->
        <div class="editor-sidebar">
            <div class="sidebar-section">
                <h3>景点列表</h3>
                <div class="attractions-list" id="editorAttractionsList">
                    <div class="loading">加载中...</div>
                </div>
            </div>
            
            <div class="sidebar-section">
                <h3>编辑工具</h3>
                <div class="tool-buttons">
                    <button class="tool-btn active" data-tool="select">
                        <svg viewBox="0 0 24 24" width="18" height="18">
                            <path fill="currentColor" d="M7 15l5-5 5 5z"/>
                        </svg>
                        选择
                    </button>
                    <button class="tool-btn" data-tool="add">
                        <svg viewBox="0 0 24 24" width="18" height="18">
                            <path fill="currentColor" d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                        </svg>
                        添加标记
                    </button>
                    <button class="tool-btn" data-tool="move">
                        <svg viewBox="0 0 24 24" width="18" height="18">
                            <path fill="currentColor" d="M20 9H4v2h16V9zM4 15h16v-2H4v2z"/>
                        </svg>
                        移动
                    </button>
                </div>
                
                <div class="grid-controls">
                    <label class="checkbox-label">
                        <input type="checkbox" id="showGridCheckbox">
                        显示网格
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" id="snapToGridCheckbox">
                        对齐网格
                    </label>
                </div>
            </div>
        </div>

        <!-- 中间地图区域 -->
        <div class="editor-main">
            <div class="map-container">
                <!-- 复用H5端的地图结构 -->
                <div class="map-background"></div>
                
                <div class="map-wrapper" id="editorMapWrapper">
                    <div class="map-content" id="editorMapContent">
                        <!-- 网格辅助线 -->
                        <div class="grid-overlay" id="editorGridOverlay"></div>
                        
                        <!-- 地图图片 -->
                        <img class="map-image" id="editorMapImage" src="../../assets/map.jpg" alt="旅游地图" draggable="false">
                        
                        <!-- 景点标记容器 -->
                        <div id="editorMarkersContainer"></div>
                    </div>
                </div>

                <!-- 地图控制按钮 -->
                <div class="map-controls">
                    <button class="control-btn" id="editorLocateBtn" title="重置视图">
                        <svg viewBox="0 0 24 24" width="20" height="20">
                            <path fill="currentColor" d="M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm8.94 3A8.994 8.994 0 0 0 13 3.06V1h-2v2.06A8.994 8.994 0 0 0 3.06 11H1v2h2.06A8.994 8.994 0 0 0 11 20.94V23h2v-2.06A8.994 8.994 0 0 0 20.94 13H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"/>
                        </svg>
                    </button>
                    <button class="control-btn" id="editorZoomInBtn" title="放大">
                        <svg viewBox="0 0 24 24" width="20" height="20">
                            <path fill="currentColor" d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                        </svg>
                    </button>
                    <button class="control-btn" id="editorZoomOutBtn" title="缩小">
                        <svg viewBox="0 0 24 24" width="20" height="20">
                            <path fill="currentColor" d="M19 13H5v-2h14v2z"/>
                        </svg>
                    </button>
                </div>
            </div>
            
            <!-- 坐标显示 -->
            <div class="coordinate-display" id="editorCoordinateDisplay">
                坐标: (0, 0)
            </div>
        </div>

        <!-- 右侧编辑面板 -->
        <div class="editor-panel">
            <div class="panel-section">
                <h3>标记属性</h3>
                <div class="property-form" id="markerProperties">
                    <div class="form-group">
                        <label>关联景点</label>
                        <select id="markerAttraction" class="form-select">
                            <option value="">选择景点</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>X 坐标 (%)</label>
                        <input type="number" id="markerX" class="form-input" min="0" max="100" step="0.1">
                    </div>
                    
                    <div class="form-group">
                        <label>Y 坐标 (%)</label>
                        <input type="number" id="markerY" class="form-input" min="0" max="100" step="0.1">
                    </div>
                    
                    <div class="form-actions">
                        <button class="btn btn-primary" id="saveMarkerBtn">保存标记</button>
                        <button class="btn btn-danger" id="deleteMarkerBtn">删除标记</button>
                    </div>
                </div>
            </div>
            
            <div class="panel-section">
                <h3>地图设置</h3>
                <div class="map-settings">
                    <div class="form-group">
                        <label>地图缩放</label>
                        <input type="range" id="mapZoomSlider" min="50" max="200" value="100" class="form-slider">
                        <span id="zoomValue">100%</span>
                    </div>
                    
                    <div class="form-group">
                        <label>标记大小</label>
                        <input type="range" id="markerSizeSlider" min="80" max="150" value="100" class="form-slider">
                        <span id="markerSizeValue">100%</span>
                    </div>
                    
                    <div class="form-group">
                        <label>网格大小</label>
                        <input type="range" id="gridSizeSlider" min="10" max="50" value="20" class="form-slider">
                        <span id="gridSizeValue">20px</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 确认保存对话框 -->
<div class="modal" id="saveConfirmModal">
    <div class="modal-content">
        <div class="modal-header">
            <h3>确认保存</h3>
            <button class="modal-close" data-dismiss="modal">&times;</button>
        </div>
        <div class="modal-body">
            <p>确定要保存所有更改吗？这将更新H5端的地图显示。</p>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" data-dismiss="modal">取消</button>
            <button class="btn btn-primary" id="confirmSaveBtn">确认保存</button>
        </div>
    </div>
</div>